{% extends 'base_public.html' %}
{% block title %}Invoices{% endblock %}
{% block content %}
<div class="card">
  <h1 class="text-xl font-semibold mb-4">Your Invoices</h1>
  {% if invoices %}
  <div class="overflow-x-auto">
    <table class="min-w-full text-sm">
      <thead class="border-b text-left">
        <tr class="text-slate-600">
          <th class="py-2 pr-4">Number</th>
          <th class="py-2 pr-4">Quote</th>
          <th class="py-2 pr-4">Total</th>
          <th class="py-2 pr-4">Status</th>
          <th class="py-2 pr-4">Created</th>
          <th class="py-2 pr-4" colspan="2"></th>
        </tr>
      </thead>
      <tbody class="divide-y">
        {% for inv in invoices %}
        <tr>
          <td class="py-2 pr-4 font-mono text-xs">{{ inv.number }}</td>
          <td class="py-2 pr-4">{{ inv.quote.reference }}</td>
          <td class="py-2 pr-4">Â£{{ inv.total }}</td>
          <td class="py-2 pr-4">
            {% if inv.status == 'paid' %}
              <span class="inline-block px-2 py-0.5 rounded bg-green-100 text-green-700 text-xs font-semibold">Paid</span>
            {% else %}
              <span class="inline-block px-2 py-0.5 rounded bg-yellow-100 text-yellow-700 text-xs font-semibold">Unpaid</span>
            {% endif %}
          </td>
          <td class="py-2 pr-4 text-xs text-slate-500">{{ inv.created_at|date:'Y-m-d' }}</td>
          <td class="py-2 pr-2"><a href="{% url 'accounts:invoice_detail' inv.number %}" class="text-blue-600 hover:underline">View</a></td>
          <td class="py-2 pr-2"><a href="{% url 'quotes:invoice_pdf' inv.number %}" class="text-slate-600 hover:text-slate-900" target="_blank" rel="noopener">PDF</a></td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% else %}
    <p class="text-sm text-slate-600">No invoices yet.</p>
  {% endif %}
</div>
{% endblock %}